### 观察者模式
```javascript
class Subject {
  constructor() {
    this.observers = []
  }

  add(observer) {
    this.observers.push(observer)
  }

  notify(...args) {// 没有事件通道通知给观察者
    // 与Observer代码耦合
    this.observers.forEach(observer => observer.update(...args))
  }

  remove(observer) {
    this.observers = this.observers.filter(it => it !== observer)
  }
}

class Observer {
  constructor(name) {
    this.name = name
  }
  update(...args) {
    console.log(...args, this.name)
  }
}

const observer1 = new Observer('观察者1') // 创建观察者1
const observer2 = new Observer('观察者1') // 创建观察者2
const sub = new Subject() // 创建发布者
sub.add(observer1) // 添加观察者1
sub.add(observer2) // 添加观察者2
sub.remove(observer2)
sub.notify('你好')
```
### 订阅/发布模式
``` javascript
// 事件调度中心. 有事件通道
class PubsubEvent {
  constructor() {
    this.subscribers = {} // { [String]: [Function, ...] }
  }

  subscribe(topic, fn) { // 订阅
    if (!this.subscribers[topic]) {
      this.subscribers[topic] = []
    }
    this.subscribers[topic].push(fn)
  }

  publish(topic, ...args) { // 发布
    const fns = this.subscribers[topic]
    if (!fns) return
    fns.forEach(fn => fn(...args))
  }

  remove(topic) { // 取消订阅
    delete this.subscribers[topic]
  }
}

const pubsub = new PubsubEvent()

pubsub.subscribe('订阅1', (...args) => {
  console.log(...args)
})

pubsub.subscribe('订阅2', (...args) => {
  console.log(...args)
})
pubsub.publish('订阅1', '你好yayayay')
pubsub.remove('订阅1')
pubsub.publish('订阅1', '你好yayayay')
```